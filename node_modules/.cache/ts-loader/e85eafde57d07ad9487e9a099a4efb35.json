{"remainingRequest":"D:\\Vue\\system-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue\\system-vue\\node_modules\\ts-loader\\index.js??ref--13-2!D:\\Vue\\system-vue\\src\\utils\\http.ts","dependencies":[{"path":"D:\\Vue\\system-vue\\src\\utils\\http.ts","mtime":1600752902660},{"path":"D:\\Vue\\system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7Ci8qKg0KICogaHR0cOivt+axguW3peWFt+exuw0KICoNCiAqIOivt+axguaLpuaIquWZqCDotJ/otKPlsIblrqLmiLfnq6/moIfor4Z0b2tlbuWAvOWtmOWCqOW5tuaUvue9ruWcqOWktOmDqOaPkOS6pOe7meacjeWKoeerrw0KICoNCiAqIOWTjeW6lOaLpuaIquWZqCDotJ/otKPlhajlsYDlpITnkIbkuJrliqHor7fmsYLnmoTnvZHnu5zmiJbogIXkuJrliqHplJnor68NCiAqLwovLyDliJvlu7pheGlvc+eahOWunuS+iwoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIHRpbWVvdXQ6IDEwMDAwIC8vIOi2heaXtuaXtumXtAoKfSk7IC8vIOivt+axguaLpuaIqgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGlmIChsb2NhbFN0b3JhZ2UudHNUb2tlbikgewogICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGxvY2FsU3RvcmFnZS50c1Rva2VuOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycikgewogIFByb21pc2UucmVqZWN0KGVycik7Cn0pOyAvLyDlk43lupTmi6bmiKoKCnNlcnZpY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICByZXR1cm4gcmVzcG9uc2U7Cn0sIGZ1bmN0aW9uIChlcnIpIHsKICB2YXIgZXJyTXNnID0gJyc7CgogIGlmIChlcnIgJiYgZXJyLnJlc3BvbnNlLnN0YXR1cykgewogICAgc3dpdGNoIChlcnIucmVzcG9uc2Uuc3RhdHVzKSB7CiAgICAgIGNhc2UgNDAxOgogICAgICAgIGVyck1zZyA9ICfnmbvlvZXnirbmgIHlpLHmlYjvvIzor7fph43mlrDnmbvlvZUnOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0c1Rva2VuJyk7CiAgICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA0MDM6CiAgICAgICAgZXJyTXNnID0gJ+aLkue7neiuv+mXric7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDQwODoKICAgICAgICBlcnJNc2cgPSAn6K+35rGC6LaF5pe2JzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNTAwOgogICAgICAgIGVyck1zZyA9ICfmnI3liqHlmajlhoXpg6jplJnor68nOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1MDE6CiAgICAgICAgZXJyTXNnID0gJ+acjeWKoeacquWunueOsCc7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDUwMjoKICAgICAgICBlcnJNc2cgPSAn572R5YWz6ZSZ6K+vJzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNTAzOgogICAgICAgIGVyck1zZyA9ICfmnI3liqHkuI3lj6/nlKgnOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1MDQ6CiAgICAgICAgZXJyTXNnID0gJ+e9keWFs+i2heaXtic7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDUwNToKICAgICAgICBlcnJNc2cgPSAnSFRUUOeJiOacrOS4jeWPl+aUr+aMgSc7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIGVyck1zZyA9IGVyci5yZXNwb25zZS5kYXRhLm1zZzsKICAgICAgICBicmVhazsKICAgIH0KICB9IGVsc2UgewogICAgZXJyTXNnID0gZXJyOwogIH0KCiAgTWVzc2FnZS5lcnJvcihlcnJNc2cpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJNc2cpOwp9KTsKZXhwb3J0IGRlZmF1bHQgc2VydmljZTs="},{"version":3,"sources":["D:\\Vue\\system-vue\\src\\utils\\http.ts"],"names":[],"mappings":";AAAA,OAAO,KAAP,MAAyD,OAAzD;AACA,SAAS,OAAT,QAAwB,YAAxB;AACA,OAAO,MAAP,MAAmB,UAAnB;AAEA;;;;;;;AAQA;;AACA,IAAM,OAAO,GAAG,KAAK,CAAC,MAAN,CAAa;AACzB,EAAA,OAAO,EAAE,KADgB,CACV;;AADU,CAAb,CAAhB,C,CAIA;;AACA,OAAO,CAAC,YAAR,CAAqB,OAArB,CAA6B,GAA7B,CACI,UAAC,MAAD,EAA+B;AAC3B,MAAI,YAAY,CAAC,OAAjB,EAA0B;AACtB,IAAA,MAAM,CAAC,OAAP,CAAe,aAAf,GAA+B,YAAY,CAAC,OAA5C;AACH;;AACD,SAAO,MAAP;AACH,CANL,EAOI,UAAC,GAAD,EAAa;AACT,EAAA,OAAO,CAAC,MAAR,CAAe,GAAf;AACH,CATL,E,CAYA;;AACA,OAAO,CAAC,YAAR,CAAqB,QAArB,CAA8B,GAA9B,CACI,UAAC,QAAD,EAA4B;AACxB,SAAO,QAAP;AACH,CAHL,EAII,UAAC,GAAD,EAAa;AACT,MAAI,MAAM,GAAG,EAAb;;AACA,MAAI,GAAG,IAAI,GAAG,CAAC,QAAJ,CAAa,MAAxB,EAAgC;AAC5B,YAAQ,GAAG,CAAC,QAAJ,CAAa,MAArB;AACI,WAAK,GAAL;AACI,QAAA,MAAM,GAAG,cAAT;AACA,QAAA,YAAY,CAAC,UAAb,CAAwB,SAAxB;AACA,QAAA,MAAM,CAAC,IAAP,CAAY,QAAZ;AACA;;AACJ,WAAK,GAAL;AACI,QAAA,MAAM,GAAG,MAAT;AACA;;AAEJ,WAAK,GAAL;AACI,QAAA,MAAM,GAAG,MAAT;AACA;;AAEJ,WAAK,GAAL;AACI,QAAA,MAAM,GAAG,SAAT;AACA;;AAEJ,WAAK,GAAL;AACI,QAAA,MAAM,GAAG,OAAT;AACA;;AAEJ,WAAK,GAAL;AACI,QAAA,MAAM,GAAG,MAAT;AACA;;AAEJ,WAAK,GAAL;AACI,QAAA,MAAM,GAAG,OAAT;AACA;;AAEJ,WAAK,GAAL;AACI,QAAA,MAAM,GAAG,MAAT;AACA;;AAEJ,WAAK,GAAL;AACI,QAAA,MAAM,GAAG,YAAT;AACA;;AAEJ;AACI,QAAA,MAAM,GAAG,GAAG,CAAC,QAAJ,CAAa,IAAb,CAAkB,GAA3B;AACA;AAxCR;AA0CH,GA3CD,MA2CO;AACH,IAAA,MAAM,GAAG,GAAT;AACH;;AAED,EAAA,OAAO,CAAC,KAAR,CAAc,MAAd;AACA,SAAO,OAAO,CAAC,MAAR,CAAe,MAAf,CAAP;AACH,CAvDL;AA0DA,eAAe,OAAf","sourcesContent":["import axios, { AxiosResponse, AxiosRequestConfig } from 'axios';\r\nimport { Message } from 'element-ui';\r\nimport router from '@/router';\r\n\r\n/**\r\n * http请求工具类\r\n *\r\n * 请求拦截器 负责将客户端标识token值存储并放置在头部提交给服务端\r\n *\r\n * 响应拦截器 负责全局处理业务请求的网络或者业务错误\r\n */\r\n\r\n// 创建axios的实例\r\nconst service = axios.create({\r\n    timeout: 10000 // 超时时间\r\n});\r\n\r\n// 请求拦截\r\nservice.interceptors.request.use(\r\n    (config: AxiosRequestConfig) => {\r\n        if (localStorage.tsToken) {\r\n            config.headers.Authorization = localStorage.tsToken;\r\n        }\r\n        return config;\r\n    },\r\n    (err: any) => {\r\n        Promise.reject(err);\r\n    }\r\n);\r\n\r\n// 响应拦截\r\nservice.interceptors.response.use(\r\n    (response: AxiosResponse) => {\r\n        return response;\r\n    },\r\n    (err: any) => {\r\n        let errMsg = '';\r\n        if (err && err.response.status) {\r\n            switch (err.response.status) {\r\n                case 401:\r\n                    errMsg = '登录状态失效，请重新登录';\r\n                    localStorage.removeItem('tsToken');\r\n                    router.push('/login');\r\n                    break;\r\n                case 403:\r\n                    errMsg = '拒绝访问';\r\n                    break;\r\n\r\n                case 408:\r\n                    errMsg = '请求超时';\r\n                    break;\r\n\r\n                case 500:\r\n                    errMsg = '服务器内部错误';\r\n                    break;\r\n\r\n                case 501:\r\n                    errMsg = '服务未实现';\r\n                    break;\r\n\r\n                case 502:\r\n                    errMsg = '网关错误';\r\n                    break;\r\n\r\n                case 503:\r\n                    errMsg = '服务不可用';\r\n                    break;\r\n\r\n                case 504:\r\n                    errMsg = '网关超时';\r\n                    break;\r\n\r\n                case 505:\r\n                    errMsg = 'HTTP版本不受支持';\r\n                    break;\r\n\r\n                default:\r\n                    errMsg = err.response.data.msg;\r\n                    break;\r\n            }\r\n        } else {\r\n            errMsg = err;\r\n        }\r\n\r\n        Message.error(errMsg);\r\n        return Promise.reject(errMsg);\r\n    }\r\n);\r\n\r\nexport default service;\r\n"],"sourceRoot":""}]}