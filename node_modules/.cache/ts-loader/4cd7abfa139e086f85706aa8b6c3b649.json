{"remainingRequest":"D:\\Vue\\system-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\Vue\\system-vue\\node_modules\\ts-loader\\index.js??ref--13-2!D:\\Vue\\system-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Vue\\system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue\\system-vue\\src\\views\\Login\\Login.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\Vue\\system-vue\\src\\views\\Login\\Login.vue","mtime":1600762947040},{"path":"D:\\Vue\\system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOi9WdWUvc3lzdGVtLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkQ6L1Z1ZS9zeXN0ZW0tdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiRDovVnVlL3N5c3RlbS12dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICJEOi9WdWUvc3lzdGVtLXZ1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgeyBfX2RlY29yYXRlIH0gZnJvbSAidHNsaWIiOwppbXBvcnQgeyBDb21wb25lbnQsIFZ1ZSwgUHJvdmlkZSB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwppbXBvcnQgeyBBY3Rpb24gfSBmcm9tICJ2dWV4LWNsYXNzIjsKaW1wb3J0IExvZ2luSGVhZGVyIGZyb20gIi4vTG9naW5IZWFkZXIudnVlIjsKCnZhciBMb2dpbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1Z1ZSkgewogIF9pbmhlcml0cyhMb2dpbiwgX1Z1ZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoTG9naW4pOwoKICBmdW5jdGlvbiBMb2dpbigpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9naW4pOwoKICAgIF90aGlzID0gX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICBfdGhpcy5pc0xvZ2luID0gZmFsc2U7CiAgICBfdGhpcy5ydWxlRm9ybSA9IHsKICAgICAgdXNlcm5hbWU6ICIiLAogICAgICBwd2Q6ICIiLAogICAgICBhdXRvTG9naW46IHRydWUgLy/mmK/lkKboh6rliqjnmbvlvZUKCiAgICB9OwogICAgX3RoaXMucnVsZXMgPSB7CiAgICAgIHVzZXJuYW1lOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXotKblj7cnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XSwKICAgICAgcHdkOiBbewogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXlr4bnoIEnLAogICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICB9XQogICAgfTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhMb2dpbiwgW3sKICAgIGtleTogImhhbmRsZVN1Ym1pdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbInJ1bGVGb3JtIl0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgY29uc29sZS5sb2coIumqjOivgemAmui/hyIpOwoKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIF90aGlzMi5pc0xvZ2luID0gdHJ1ZTsgLy8g572R57uc6K+35rGCCgogICAgICAgICAgX3RoaXMyLiRheGlvcy5wb3N0KCIvYXBpL3VzZXJzL2xvZ2luIiwgX3RoaXMyLnJ1bGVGb3JtKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgX3RoaXMyLmlzTG9naW4gPSBmYWxzZTsKICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpOwogICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidHNUb2tlbiIsIHJlcy5kYXRhLnRva2VuKTsgLy8g5a2Y5YKo5YiwIHZ1ZXjkuK0KCiAgICAgICAgICAgIF90aGlzMi5zZXRVc2VyKHJlcy5kYXRhLnRva2VuKTsKCiAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goIi8iKTsKICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMyLmlzTG9naW4gPSBmYWxzZTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTG9naW47Cn0oVnVlKTsKCl9fZGVjb3JhdGUoW0FjdGlvbigic2V0VXNlciIpXSwgTG9naW4ucHJvdG90eXBlLCAic2V0VXNlciIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm92aWRlKCldLCBMb2dpbi5wcm90b3R5cGUsICJpc0xvZ2luIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1Byb3ZpZGUoKV0sIExvZ2luLnByb3RvdHlwZSwgInJ1bGVGb3JtIiwgdm9pZCAwKTsKCl9fZGVjb3JhdGUoW1Byb3ZpZGUoKV0sIExvZ2luLnByb3RvdHlwZSwgInJ1bGVzIiwgdm9pZCAwKTsKCkxvZ2luID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBjb21wb25lbnRzOiB7CiAgICBMb2dpbkhlYWRlcjogTG9naW5IZWFkZXIKICB9Cn0pXSwgTG9naW4pOwpleHBvcnQgZGVmYXVsdCBMb2dpbjs="},{"version":3,"sources":["D:\\Vue\\system-vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Vue\\system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue\\system-vue\\src\\views\\Login\\Login.vue?vue&type=script&lang=ts&"],"names":[],"mappings":";;;;;AAqCA,SAAS,SAAT,EAAmB,GAAnB,EAAyB,OAAzB,QAAuC,wBAAvC;AACA,SAAkC,MAAlC,QAAgD,YAAhD;AACA,OAAO,WAAP,MAAwB,mBAAxB;;AAMA,IAAqB,KAArB;AAAA;;AAAA;;AAAA,mBAAA;AAAA;;AAAA;;;AAGY,UAAA,OAAA,GAAkB,KAAlB;AACG,UAAA,QAAA,GAIP;AACA,MAAA,QAAQ,EAAE,EADV;AAEA,MAAA,GAAG,EAAE,EAFL;AAGA,MAAA,SAAS,EAAE,IAHX,CAGgB;;AAHhB,KAJO;AASH,UAAA,KAAA,GAAQ;AAClB,MAAA,QAAQ,EAAC,CAAC;AAAE,QAAA,QAAQ,EAAE,IAAZ;AAAkB,QAAA,OAAO,EAAE,OAA3B;AAAoC,QAAA,OAAO,EAAE;AAA7C,OAAD,CADS;AAElB,MAAA,GAAG,EAAC,CAAC;AAAE,QAAA,QAAQ,EAAE,IAAZ;AAAkB,QAAA,OAAO,EAAE,OAA3B;AAAoC,QAAA,OAAO,EAAE;AAA7C,OAAD;AAFc,KAAR;AAbZ;AAwCC;;AAxCD;AAAA;AAAA,mCAiBa;AAAA;;AACV,WAAK,KAAL,CAAW,UAAX,EAA+B,QAA/B,CAAwC,UAAC,KAAD,EAAkB;AAC1D,QAAA,OAAO,CAAC,GAAR,CAAY,MAAZ;;AACA,YAAI,KAAJ,EAAW;AACV,UAAA,MAAI,CAAC,OAAL,GAAe,IAAf,CADU,CAEV;;AACC,UAAA,MAAY,CAAC,MAAb,CACA,IADA,CACK,kBADL,EACyB,MAAI,CAAC,QAD9B,EAEA,IAFA,CAEK,UAAC,GAAD,EAAa;AAClB,YAAA,MAAI,CAAC,OAAL,GAAe,KAAf;AACA,YAAA,OAAO,CAAC,GAAR,CAAY,GAAG,CAAC,IAAhB;AACA,YAAA,YAAY,CAAC,OAAb,CAAqB,SAArB,EAA+B,GAAG,CAAC,IAAJ,CAAS,KAAxC,EAHkB,CAIH;;AACA,YAAA,MAAI,CAAC,OAAL,CAAa,GAAG,CAAC,IAAJ,CAAS,KAAtB;;AACf,YAAA,MAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,GAAlB;AACA,WATA,EAUA,KAVA,CAUM,YAAK;AACX,YAAA,MAAI,CAAC,OAAL,GAAe,KAAf;AACA,WAZA;AAaD;AACD,OAnBA;AAqBD;AAvCF;;AAAA;AAAA,EAAmC,GAAnC,CAAA;;AAEuB,UAAA,CAAA,CAAlB,MAAM,CAAC,SAAD,CAAY,CAAA,E,eAAA,E,SAAA,E,KAAY,CAAZ,CAAA;;AACX,UAAA,CAAA,CAAV,OAAO,EAAG,CAAA,E,eAAA,E,SAAA,E,KAAwB,CAAxB,CAAA;;AACG,UAAA,CAAA,CAAV,OAAO,EAAG,CAAA,E,eAAA,E,UAAA,E,KAQZ,CARY,CAAA;;AASH,UAAA,CAAA,CAAV,OAAO,EAAG,CAAA,E,eAAA,E,OAAA,E,KAGV,CAHU,CAAA;;AAbS,KAAK,GAAA,UAAA,CAAA,CALzB,SAAS,CAAC;AACP,EAAA,UAAU,EAAE;AACR,IAAA,WAAW,EAAX;AADQ;AADL,CAAD,CAKgB,CAAA,EAAL,KAAK,CAAL;eAAA,K","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component,Vue , Provide} from \"vue-property-decorator\";\r\nimport { State, Getter, Mutation, Action } from \"vuex-class\";\r\nimport LoginHeader from \"./LoginHeader.vue\";\r\n@Component({\r\n    components: {\r\n        LoginHeader,\r\n    },\r\n})\r\nexport default class Login extends Vue {\r\n    // 存储用户信息\r\n    @Action(\"setUser\") setUser:any;\r\n\t@Provide() isLogin:boolean = false;\r\n    @Provide() ruleForm: {\r\n        username: String,\r\n        pwd: String,\r\n        autoLogin: boolean\r\n    } = {\r\n        username: \"\",\r\n        pwd: \"\",\r\n        autoLogin: true //是否自动登录\r\n\t};\r\n\t@Provide() rules = {\r\n\t\tusername:[{ required: true, message: '请输入账号', trigger: 'blur' }],\r\n\t\tpwd:[{ required: true, message: '请输入密码', trigger: 'blur' }]\r\n\t}\r\n\thandleSubmit():void{\r\n\t\t(this.$refs[\"ruleForm\"] as any).validate((valid:boolean) => {\r\n\t\t\tconsole.log(\"验证通过\")\r\n\t\t\tif (valid) {\r\n\t\t\t\tthis.isLogin = true;\r\n\t\t\t\t// 网络请求\r\n\t\t\t\t(this as any).$axios\r\n\t\t\t\t.post(\"/api/users/login\", this.ruleForm)\r\n\t\t\t\t.then((res: any) => {\r\n\t\t\t\t\tthis.isLogin = false;\r\n\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\tlocalStorage.setItem(\"tsToken\",res.data.token);\r\n                    // 存储到 vuex中\r\n                    this.setUser(res.data.token);\r\n\t\t\t\t\tthis.$router.push(\"/\");\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.isLogin = false;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t}\r\n}\r\n"],"sourceRoot":""}]}