{"remainingRequest":"D:\\Vue\\system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue\\system-vue\\src\\views\\Login\\Login.vue?vue&type=style&index=0&id=2c86e14e&lang=scss&scoped=true&","dependencies":[{"path":"D:\\Vue\\system-vue\\src\\views\\Login\\Login.vue","mtime":1600762947040},{"path":"D:\\Vue\\system-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnRpdGxlIHsNCiAgICBtYXJnaW46IDBweCBhdXRvIDQwcHggYXV0bzsNCiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7DQogICAgY29sb3I6ICM1MDU0NTg7DQp9DQoNCmkgew0KICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICBtYXJnaW4tbGVmdDogOHB4Ow0KfQ0KLm9uU3VibWl0ew0KCXdpZHRoOiAxMDAlOw0KfQ0KLmZvcmdldCB7DQogICAgZmxvYXQ6IHJpZ2h0Ow0KfQ0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views/Login","sourcesContent":["<template>\r\n    <div class=\"login\">\r\n        <LoginHeader>\r\n            <el-form\r\n                ref=\"ruleForm\"\r\n\t\t\t\t:rules = \"rules\"\r\n                :model=\"ruleForm\"\r\n                slot=\"container\"\r\n                label-position=\"left\"\r\n                label-width=\"0px\"\r\n            >\r\n                <div class=\"title\">\r\n                    <h3>账号密码登陆</h3>\r\n                </div>\r\n\t\t\t\t<el-form-item prop=\"username\">\r\n\t\t\t\t\t<el-input v-model=\"ruleForm.username\" placeholder=\"请输入账号\" >\r\n\t\t\t\t\t\t<i slot=\"prefix\" class=\"fa fa-user-o\"></i>\r\n\t\t\t\t\t</el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item prop=\"pwd\">\r\n\t\t\t\t\t<el-input type=\"password\" v-model=\"ruleForm.pwd\" placeholder=\"请输入密码\" >\r\n\t\t\t\t\t\t<i slot=\"prefix\" class=\"fa fa-lock\"></i>\r\n\t\t\t\t\t</el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-button :loading=\"isLogin\" class=\"onSubmit\" type=\"primary\" @click.native.prevent=\"handleSubmit\">登录</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-checkbox label=\"7天内自动登录\" :checked=\"ruleForm.autoLogin\"></el-checkbox>\r\n\t\t\t\t\t<el-button @click=\"$router.push('/password')\" class=\"forget\">忘记密码？</el-button>\r\n\t\t\t\t</el-form-item>\r\n            </el-form>\r\n        </LoginHeader>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component,Vue , Provide} from \"vue-property-decorator\";\r\nimport { State, Getter, Mutation, Action } from \"vuex-class\";\r\nimport LoginHeader from \"./LoginHeader.vue\";\r\n@Component({\r\n    components: {\r\n        LoginHeader,\r\n    },\r\n})\r\nexport default class Login extends Vue {\r\n    // 存储用户信息\r\n    @Action(\"setUser\") setUser:any;\r\n\t@Provide() isLogin:boolean = false;\r\n    @Provide() ruleForm: {\r\n        username: String,\r\n        pwd: String,\r\n        autoLogin: boolean\r\n    } = {\r\n        username: \"\",\r\n        pwd: \"\",\r\n        autoLogin: true //是否自动登录\r\n\t};\r\n\t@Provide() rules = {\r\n\t\tusername:[{ required: true, message: '请输入账号', trigger: 'blur' }],\r\n\t\tpwd:[{ required: true, message: '请输入密码', trigger: 'blur' }]\r\n\t}\r\n\thandleSubmit():void{\r\n\t\t(this.$refs[\"ruleForm\"] as any).validate((valid:boolean) => {\r\n\t\t\tconsole.log(\"验证通过\")\r\n\t\t\tif (valid) {\r\n\t\t\t\tthis.isLogin = true;\r\n\t\t\t\t// 网络请求\r\n\t\t\t\t(this as any).$axios\r\n\t\t\t\t.post(\"/api/users/login\", this.ruleForm)\r\n\t\t\t\t.then((res: any) => {\r\n\t\t\t\t\tthis.isLogin = false;\r\n\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\tlocalStorage.setItem(\"tsToken\",res.data.token);\r\n                    // 存储到 vuex中\r\n                    this.setUser(res.data.token);\r\n\t\t\t\t\tthis.$router.push(\"/\");\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.isLogin = false;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.title {\r\n    margin: 0px auto 40px auto;\r\n    text-align: center;\r\n    color: #505458;\r\n}\r\n\r\ni {\r\n    font-size: 14px;\r\n    margin-left: 8px;\r\n}\r\n.onSubmit{\r\n\twidth: 100%;\r\n}\r\n.forget {\r\n    float: right;\r\n}\r\n</style>"]}]}