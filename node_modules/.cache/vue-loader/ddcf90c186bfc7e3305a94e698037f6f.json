{"remainingRequest":"D:\\Vue\\system-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Vue\\system-vue\\src\\views\\Login\\Login.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\Vue\\system-vue\\src\\views\\Login\\Login.vue","mtime":1600762947040},{"path":"D:\\Vue\\system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Vue\\system-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQppbXBvcnQgeyBDb21wb25lbnQsVnVlICwgUHJvdmlkZX0gZnJvbSAidnVlLXByb3BlcnR5LWRlY29yYXRvciI7DQppbXBvcnQgeyBTdGF0ZSwgR2V0dGVyLCBNdXRhdGlvbiwgQWN0aW9uIH0gZnJvbSAidnVleC1jbGFzcyI7DQppbXBvcnQgTG9naW5IZWFkZXIgZnJvbSAiLi9Mb2dpbkhlYWRlci52dWUiOw0KQENvbXBvbmVudCh7DQogICAgY29tcG9uZW50czogew0KICAgICAgICBMb2dpbkhlYWRlciwNCiAgICB9LA0KfSkNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIExvZ2luIGV4dGVuZHMgVnVlIHsNCiAgICAvLyDlrZjlgqjnlKjmiLfkv6Hmga8NCiAgICBAQWN0aW9uKCJzZXRVc2VyIikgc2V0VXNlcjphbnk7DQoJQFByb3ZpZGUoKSBpc0xvZ2luOmJvb2xlYW4gPSBmYWxzZTsNCiAgICBAUHJvdmlkZSgpIHJ1bGVGb3JtOiB7DQogICAgICAgIHVzZXJuYW1lOiBTdHJpbmcsDQogICAgICAgIHB3ZDogU3RyaW5nLA0KICAgICAgICBhdXRvTG9naW46IGJvb2xlYW4NCiAgICB9ID0gew0KICAgICAgICB1c2VybmFtZTogIiIsDQogICAgICAgIHB3ZDogIiIsDQogICAgICAgIGF1dG9Mb2dpbjogdHJ1ZSAvL+aYr+WQpuiHquWKqOeZu+W9lQ0KCX07DQoJQFByb3ZpZGUoKSBydWxlcyA9IHsNCgkJdXNlcm5hbWU6W3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXotKblj7cnLCB0cmlnZ2VyOiAnYmx1cicgfV0sDQoJCXB3ZDpbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeWvhueggScsIHRyaWdnZXI6ICdibHVyJyB9XQ0KCX0NCgloYW5kbGVTdWJtaXQoKTp2b2lkew0KCQkodGhpcy4kcmVmc1sicnVsZUZvcm0iXSBhcyBhbnkpLnZhbGlkYXRlKCh2YWxpZDpib29sZWFuKSA9PiB7DQoJCQljb25zb2xlLmxvZygi6aqM6K+B6YCa6L+HIikNCgkJCWlmICh2YWxpZCkgew0KCQkJCXRoaXMuaXNMb2dpbiA9IHRydWU7DQoJCQkJLy8g572R57uc6K+35rGCDQoJCQkJKHRoaXMgYXMgYW55KS4kYXhpb3MNCgkJCQkucG9zdCgiL2FwaS91c2Vycy9sb2dpbiIsIHRoaXMucnVsZUZvcm0pDQoJCQkJLnRoZW4oKHJlczogYW55KSA9PiB7DQoJCQkJCXRoaXMuaXNMb2dpbiA9IGZhbHNlOw0KCQkJCQljb25zb2xlLmxvZyhyZXMuZGF0YSk7DQoJCQkJCWxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0c1Rva2VuIixyZXMuZGF0YS50b2tlbik7DQogICAgICAgICAgICAgICAgICAgIC8vIOWtmOWCqOWIsCB2dWV45LitDQogICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VXNlcihyZXMuZGF0YS50b2tlbik7DQoJCQkJCXRoaXMuJHJvdXRlci5wdXNoKCIvIik7DQoJCQkJfSkNCgkJCQkuY2F0Y2goKCkgPT4gew0KCQkJCQl0aGlzLmlzTG9naW4gPSBmYWxzZTsNCgkJCQl9KQ0KCQkJfQ0KCQl9KQ0KCQkNCgl9DQp9DQo="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Login.vue","sourceRoot":"src/views/Login","sourcesContent":["<template>\r\n    <div class=\"login\">\r\n        <LoginHeader>\r\n            <el-form\r\n                ref=\"ruleForm\"\r\n\t\t\t\t:rules = \"rules\"\r\n                :model=\"ruleForm\"\r\n                slot=\"container\"\r\n                label-position=\"left\"\r\n                label-width=\"0px\"\r\n            >\r\n                <div class=\"title\">\r\n                    <h3>账号密码登陆</h3>\r\n                </div>\r\n\t\t\t\t<el-form-item prop=\"username\">\r\n\t\t\t\t\t<el-input v-model=\"ruleForm.username\" placeholder=\"请输入账号\" >\r\n\t\t\t\t\t\t<i slot=\"prefix\" class=\"fa fa-user-o\"></i>\r\n\t\t\t\t\t</el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item prop=\"pwd\">\r\n\t\t\t\t\t<el-input type=\"password\" v-model=\"ruleForm.pwd\" placeholder=\"请输入密码\" >\r\n\t\t\t\t\t\t<i slot=\"prefix\" class=\"fa fa-lock\"></i>\r\n\t\t\t\t\t</el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-button :loading=\"isLogin\" class=\"onSubmit\" type=\"primary\" @click.native.prevent=\"handleSubmit\">登录</el-button>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-checkbox label=\"7天内自动登录\" :checked=\"ruleForm.autoLogin\"></el-checkbox>\r\n\t\t\t\t\t<el-button @click=\"$router.push('/password')\" class=\"forget\">忘记密码？</el-button>\r\n\t\t\t\t</el-form-item>\r\n            </el-form>\r\n        </LoginHeader>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component,Vue , Provide} from \"vue-property-decorator\";\r\nimport { State, Getter, Mutation, Action } from \"vuex-class\";\r\nimport LoginHeader from \"./LoginHeader.vue\";\r\n@Component({\r\n    components: {\r\n        LoginHeader,\r\n    },\r\n})\r\nexport default class Login extends Vue {\r\n    // 存储用户信息\r\n    @Action(\"setUser\") setUser:any;\r\n\t@Provide() isLogin:boolean = false;\r\n    @Provide() ruleForm: {\r\n        username: String,\r\n        pwd: String,\r\n        autoLogin: boolean\r\n    } = {\r\n        username: \"\",\r\n        pwd: \"\",\r\n        autoLogin: true //是否自动登录\r\n\t};\r\n\t@Provide() rules = {\r\n\t\tusername:[{ required: true, message: '请输入账号', trigger: 'blur' }],\r\n\t\tpwd:[{ required: true, message: '请输入密码', trigger: 'blur' }]\r\n\t}\r\n\thandleSubmit():void{\r\n\t\t(this.$refs[\"ruleForm\"] as any).validate((valid:boolean) => {\r\n\t\t\tconsole.log(\"验证通过\")\r\n\t\t\tif (valid) {\r\n\t\t\t\tthis.isLogin = true;\r\n\t\t\t\t// 网络请求\r\n\t\t\t\t(this as any).$axios\r\n\t\t\t\t.post(\"/api/users/login\", this.ruleForm)\r\n\t\t\t\t.then((res: any) => {\r\n\t\t\t\t\tthis.isLogin = false;\r\n\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\tlocalStorage.setItem(\"tsToken\",res.data.token);\r\n                    // 存储到 vuex中\r\n                    this.setUser(res.data.token);\r\n\t\t\t\t\tthis.$router.push(\"/\");\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tthis.isLogin = false;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.title {\r\n    margin: 0px auto 40px auto;\r\n    text-align: center;\r\n    color: #505458;\r\n}\r\n\r\ni {\r\n    font-size: 14px;\r\n    margin-left: 8px;\r\n}\r\n.onSubmit{\r\n\twidth: 100%;\r\n}\r\n.forget {\r\n    float: right;\r\n}\r\n</style>"]}]}